{"ast":null,"code":"import{createContext,useState,useContext}from\"react\";// item tracking code and context from ChatGPT \n// https://chatgpt.com/share/67b808ed-0d5c-8006-867e-afaaa0959ed1\nimport{jsx as _jsx}from\"react/jsx-runtime\";const CartContext=/*#__PURE__*/createContext();export const CartProvider=_ref=>{let{children}=_ref;const[cart,setCart]=useState([]);const[subtotal,setSubtotal]=useState(0.0);const addToCart=item=>{setCart(prevCart=>{setSubtotal(subtotal+item.price);console.log(subtotal);const existingItem=prevCart.find(cartItem=>cartItem.id===item.id);if(existingItem){console.log(existingItem.count);return prevCart.map(cartItem=>cartItem.id===item.id?{...cartItem,count:cartItem.count+1}:cartItem);}else{// add item and set to one\nconsole.log(\"first add\");return[...prevCart,{...item,count:1}];}});};const removeFromCart=item=>{console.log(\"removing\");setCart(prevCart=>{const existingItem=prevCart.find(cartItem=>cartItem.id===item.id);console.log(\"find done ig\");if(existingItem&&existingItem.count>0){setSubtotal(subtotal-existingItem.price);}console.log(subtotal);const newCart=prevCart.map(cartItem=>cartItem.id===item.id?{...cartItem,count:cartItem.count-1}:cartItem).filter(cartItem=>cartItem.count>0);return newCart;});};const getCount=id=>{const cartItem=cart.find(cartItem=>cartItem.id===id);return cartItem?cartItem.count:0;};const getSubtotal=id=>{return subtotal;};const clearCart=()=>{setCart([]);setSubtotal(0);};const cartToString=()=>{let txt=\"Order Placed!\\n\";txt+=cart.map(item=>item.count+\" \"+item.title).join(\", \");return txt;};return/*#__PURE__*/_jsx(CartContext.Provider,{value:{cartToString,addToCart,removeFromCart,subtotal,getCount,clearCart},children:children});};export const useCart=()=>useContext(CartContext);","map":{"version":3,"names":["createContext","useState","useContext","jsx","_jsx","CartContext","CartProvider","_ref","children","cart","setCart","subtotal","setSubtotal","addToCart","item","prevCart","price","console","log","existingItem","find","cartItem","id","count","map","removeFromCart","newCart","filter","getCount","getSubtotal","clearCart","cartToString","txt","title","join","Provider","value","useCart"],"sources":["C:/Users/Thomas/Documents/GitHub/cs378-p2/src/components/CartProvider.js"],"sourcesContent":["import { createContext, useState, useContext } from \"react\";\r\n\r\n// item tracking code and context from ChatGPT \r\n// https://chatgpt.com/share/67b808ed-0d5c-8006-867e-afaaa0959ed1\r\n\r\nconst CartContext = createContext();\r\n\r\nexport const CartProvider = ({ children }) => {\r\n  const [cart, setCart] = useState([]);\r\n  const [subtotal, setSubtotal] = useState(0.0);\r\n\r\n  const addToCart = (item) => {\r\n    setCart((prevCart) => {\r\n      setSubtotal(subtotal + item.price);\r\n      console.log(subtotal);\r\n      const existingItem = prevCart.find((cartItem) => cartItem.id === item.id);\r\n      if (existingItem) {\r\n        console.log(existingItem.count)\r\n        return prevCart.map((cartItem) =>\r\n          cartItem.id === item.id ? { ...cartItem, count: cartItem.count + 1 } : cartItem\r\n        );\r\n      } else {\r\n        // add item and set to one\r\n        console.log(\"first add\")\r\n        return [...prevCart, { ...item, count: 1 }];\r\n      }\r\n    });\r\n  };\r\n\r\n  const removeFromCart = (item) => {\r\n    console.log(\"removing\");\r\n    setCart((prevCart) => {\r\n      const existingItem = prevCart.find((cartItem) => cartItem.id === item.id);\r\n      console.log(\"find done ig\")\r\n      if (existingItem && existingItem.count > 0) {\r\n        setSubtotal(subtotal - existingItem.price);\r\n      }\r\n      console.log(subtotal)\r\n      const newCart = prevCart\r\n        .map((cartItem) =>\r\n          cartItem.id === item.id ? { ...cartItem, count: cartItem.count - 1 } : cartItem\r\n        )\r\n        .filter((cartItem) => cartItem.count > 0)\r\n      return newCart\r\n   });\r\n\r\n  };\r\n\r\n  const getCount = (id) => {\r\n    const cartItem = cart.find((cartItem) => cartItem.id === id);\r\n    return cartItem ? cartItem.count : 0;\r\n  };\r\n\r\n  const getSubtotal = (id) => {\r\n    return subtotal;\r\n  }\r\n\r\n  const clearCart = () => {\r\n    setCart([]);\r\n    setSubtotal(0);\r\n  }\r\n\r\n\r\n  const cartToString = () => {\r\n    let txt = \"Order Placed!\\n\";\r\n    txt += cart.map(item => item.count + \" \" + item.title).join(\", \");\r\n    return txt\r\n  }\r\n\r\n  return (\r\n\r\n    <CartContext.Provider value={{ cartToString, addToCart, removeFromCart, subtotal, getCount, clearCart }}>\r\n      {children}\r\n    </CartContext.Provider>\r\n  );\r\n};\r\n\r\nexport const useCart = () => useContext(CartContext);\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}